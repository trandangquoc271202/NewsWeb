@{
    Layout = null;
    var loggedInUser = Session["LoggedInUser"] as NewsWeb.Models.Users;

}
<style>


    .menu {
        display: flex;
        background-color: #333;
        color: #fff;
        padding: 10px;
        width: 100%;
        align-items: center !important;
        --bs-gutter-x: 1.5rem;
        margin-right: auto;
        margin-left: auto;
    }

        .menu a {
            text-decoration: none;
            color: #fff;
            margin: 0 10px;
        }

    .submenu {
        display: none;
        --bs-gutter-x: 1.5rem;
        margin-right: auto;
        margin-left: auto;
        background-color: #555;
    }

        .submenu a {
            margin-left: 15px;
            color: white;
        }

        .submenu.active {
            display: flex;
            flex-wrap: wrap;
            justify-content: left;
        }


    /* Style for the dropdown menu */
    .menu_user {
        list-style-type: none;
        padding: 0;
        position: absolute;
        top: 100%; /* Position the dropdown below the parent */
        left: 0;
        display: none; /* Hide the dropdown by default */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add a box shadow */
        background: white;
        width: 200px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add a box shadow to each menu item */
    }

        .menu_user li {
            display: inline-block;
            margin: 5px;
            width: 100%;
        }

        .menu_user a {
            text-decoration: none;
            color: #333;
            font-weight: bold;
            padding: 5px;
            border-radius: 5px;
            transition: background-color 0.3s;
            display: block;
        }

            .menu_user a:hover {
                background-color: #ddd;
            }


            .menu_user a:hover {
                background-color: #ddd;
            }

    /* Show the dropdown menu when hovering over the parent */
    .position-relative:hover .menu_user {
        display: block;
    }

    /* Additional styling for the login and register links in the else block */
    .position-relative a {
        text-decoration: none;
        color: #333;
        font-weight: bold;
        margin-right: 10px;
    }

    .item-search {
        background-color: #808080;
        width: 300px;
        border-radius: 2px;
        color: white
    }

    /* CSS để tùy chỉnh danh sách kết quả */
    #search-results {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .item-search {
        border: 1px solid #ccc;
        margin-bottom: 5px;
        padding: 10px;
    }

    .item-search a {
        text-decoration: none;
        color: #333;
    }

    .item-search a:hover {
        color: #007bff;
    }

    #voice-search-btn {
        border: none;
        float: right;
        margin-top: -28px;
    }

    #voice-search-btn:hover {
        background-color: #58686b; /* Màu nền khi hover qua nút */
    }


</style>
<!-- Thêm thư viện jQuery và jQuery UI -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script>
    $(document).ready(function () {
        // Chọn thanh input cần thêm autocomplete
        $("#searchinput").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Search/AutoComplete", // Điều chỉnh đường dẫn tùy thuộc vào cấu trúc route của bạn
                    type: "GET",
                    dataType: "json",
                    data: { term: request.term },
                    success: function (data) {
                        // Giới hạn số lượng kết quả hiển thị tối đa là 5
                        var slicedData = data.slice(0, 5);
                        response(slicedData);

                         // Hiển thị danh sách kết quả dưới thanh tìm kiếm
                        $("#search-results").empty(); // Xóa nội dung trước đó
                        $.each(slicedData, function (index, item) {
                            var link = "<a href='/Detail/Detail?id=" + item.link + "'>" + item.title + "</a>";
                            $("#search-results").append("<div class='item-search'>" + link + "</div>");
                        });
                    }
                });
            },
            minLength: 0
        });
    });

    $(document).ready(function () {
    // Khi nút giọng nói được click
    $("#voice-search-btn").on("click", function () {
        startSpeechRecognition();
    });
});

function startSpeechRecognition() {
    // Kiểm tra xem trình duyệt có hỗ trợ API nhận dạng giọng nói hay không
    if ('webkitSpeechRecognition' in window) {
        var recognition = new webkitSpeechRecognition();

        // Thiết lập các tùy chọn nhận dạng giọng nói
        recognition.continuous = false;
        recognition.interimResults = false;

        // Bắt đầu nhận dạng giọng nói
        recognition.start();

        // Sự kiện được kích hoạt khi kết quả nhận dạng giọng nói sẵn sàng
        recognition.onresult = function (event) {
            var result = event.results[0][0].transcript;
            
            // Hiển thị kết quả lên thanh tìm kiếm
            $("#searchinput").val(result);

            // Kích hoạt nút submit của form
            $("#search-form").submit();
        };

        // Sự kiện được kích hoạt khi kết thúc nhận dạng giọng nói
        recognition.onend = function () {
            // Dừng quá trình nhận dạng giọng nói
            recognition.stop();
        };
    } else {
        // Trình duyệt không hỗ trợ API nhận dạng giọng nói
        alert("Trình duyệt của bạn không hỗ trợ nhận dạng giọng nói.");
    }
}


</script>
<header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

        <a href="/Home/Index" class="logo d-flex align-items-center">
            <!-- Uncomment the line below if you also wish to use an image logo -->
            <!-- <img src="assets/img/logo.png" alt=""> -->
            <h1>BaoMiTi</h1>
        </a>

        <nav id="navbar" class="navbar">
            <ul>
                <li><a href="/Home/Index">Trang chủ</a></li>
                <li class="dropdown">
                    <a ><span>Danh mục</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
                    <ul>
                        <li><a href="/Category/World">Thế giới</a></li>
                        <li><a href="/Category/News">Thời sự</a></li>
                        <li><a href="/Category/Business">Kinh doanh</a></li>
                        <li><a href="/Category/Entertainment">Giải trí</a></li>
                        <li><a href="/Category/Sport">Thể thao</a></li>
                        <li><a href="/Category/Law">Pháp luật</a></li>
                        <li><a href="/Category/Education">Giáo dục</a></li>
                        <li><a href="/Category/Health">Sức khỏe</a></li>
                        <li><a href="/Category/Life">Đời sống</a></li>
                        <li><a href="/Category/Travel">Du lịch</a></li>
                        <li><a href="/Category/"></a></li>
                    </ul>
                </li>

                <li><a href="about.html">Thông tin</a></li>
                <li><a href="/Contact/Contact">Liên hệ</a></li>
                <li><a href="/Contact/ContactManager">Quản lý Liên hệ</a></li>
            </ul>
        </nav><!-- .navbar -->
        @if (loggedInUser != null)
        {
            <div class="position-relative">
                <span>Xin chào @loggedInUser.name</span>
                <ul class="menu_user">
                    <li><a href="~/InfoUser/InfoUser">Thông tin người dùng</a></li>
                    <li><a href="~/InfoUser/ChangePassword">Thay đổi mật khẩu</a></li>
                    <li><a href="~/Login/Logout">Đăng xuất</a></li>
                </ul>
            </div>
        }
        else
        {
            <div class="position-relative">
                <a href="~/Login/Login" class="mx-2">Đăng nhập</a>
                <a href="~/Register/Register" class="mx-2">Đăng ký</a>
            </div>
        }






        <a href="#" class="mx-2 js-search-open"><span class="bi-search"></span></a>
        <i class="bi bi-list mobile-nav-toggle"></i>

        <!-- ======= Search Form ======= -->
        <div class="search-form-wrap js-search-form-wrap">
            <form action="/Search/Search" class="search-form" id="search-form" method="post" style="width:306px; margin-right:30px">
                <button type="submit" style="border:hidden"><span class="icon bi-search" style="margin-top:24px"></span></button>
                <input id="searchinput" type="text" placeholder="Search" class="form-control" name="title" style="margin-right:36px">
                <div id="search-results"></div>
                <button class="btn js-search-close" style="margin-top:25px"><span class="bi-x"></span></button>
            </form>
            <button id="voice-search-btn"><i class="bi bi-mic"></i></button>
        </div><!-- End Search Form -->

    </div>

    </div>

</header>
